<div class="container">
  <div class="card p-3">
    <h5>ID: <%= @reservation.id %></h5>
    <h5>Room Number: <%= @reservation.room_number %></h5>
    <h5>Guest: <%= @reservation.user.first_name %> <%= @reservation.user.last_name %></h5>
  </div>
</div>

<div class="container p-3" style="background-color: beige;">
  <h5>Requests / Time requests:</h5>
  <% @all_requests.each do |request| %>
    <% if request.class == TimeRequest %>
      <div class="card w-75 p-3 mb-3">
        <h6>Time Request: </h6>
        <p><%= request.time %></p>
      </div>
    <% else %>
      <div class="card w-75 p-3 mb-3">
        <h6>Amenity Request:</h6>
        <p><%= request.hotel_amenity %></p>
      </div>
    <% end %>
  <% end %>

  <h5>Messages:</h5>
  <% @messages.each do |message| %>
    <div class="card w-75 p-3 mb-3">
      <p>Time: <%= message.created_at %></p>
      <p>Message: <%= message.content %></p>
    </div>
  <% end %>
</div>

<div class="container">
  <div id="messages" data-reservation-id="<%= @reservation.id %>">
    <% @reservation.messages.each do |message| %>
      <div class="message-container" id="message-<%= message.id %>">
        <i class="author">
          <span><%= message.user.first_name %></span>
          <small><%= message.created_at.strftime("%a %b %e at %l:%M%p") %></small>
        </i>
        <p><%= message.content %></p>
      </div>
    <% end %>
  </div>

        <% if false %>
          <%= simple_form_for [ @reservation, @message ] do |f| %>
            <%= f.input :content, label: false, placeholder: "Message" %>
            <%= f.submit %>
          <% end %>
        <% end %>

  <%= simple_form_for @message, url: staff_reservation_messages_path(@reservation), remote: true do |form| %>
    <div class="input-group mb-3">
      <%= form.input :content, as: :string,
                                wrapper: false,
                                label: false,
                                input_html: {
                                  class: 'chat-input'
                                } %>
      <div class="input-group-append">
        <%= form.submit "Send", class: 'btn btn-primary chat-input' %>
      </div>
    </div>
    <%= form.input :reservation_id, as: :hidden %>
  <% end %>
</div>